{"version":3,"file":"map.umd.min.279.js","mappings":"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","sources":["webpack://map/./src/components/Map/modules/MouseCoordinatesControl/MouseCoordinatesControl.vue","webpack://map/./src/utils/CRS.js","webpack://map/src/components/Map/modules/MouseCoordinatesControl/MouseCoordinatesControl.vue","webpack://map/./src/components/Map/modules/MouseCoordinatesControl/MouseCoordinatesControl.vue?72e2","webpack://map/./src/components/Map/modules/MouseCoordinatesControl/MouseCoordinatesControl.vue?6f14","webpack://map/./src/components/Map/ModuleContainer.vue","webpack://map/src/components/Map/ModuleContainer.vue","webpack://map/./src/components/Map/ModuleContainer.vue?23e5","webpack://map/./src/components/Map/ModuleContainer.vue?d01d","webpack://map/./src/components/Map/mixins/ModuleMixin.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('ModuleContainer',_vm._b({scopedSlots:_vm._u([{key:\"btn\",fn:function(){return [_c('div',{staticClass:\"button-container d-flex mapboxgl-ctrl-mouse-coordinates-container\"},[_c('div',{staticClass:\"mapboxgl-ctrl-mouse-coordinates\"},[_c('div',{staticClass:\"mapboxgl-ctrl-mouse-coordinates-zoom flex-grow-0 d-flex pr-2\"},[_c('i',{class:[_vm.zoomIcon],attrs:{\"title\":\"Current Zoom\"}}),_c('div',{staticStyle:{\"margin-left\":\"4px\"}},[_vm._v(_vm._s(_vm.currentZoom))])]),_c('div',{staticClass:\"mapboxgl-ctrl-mouse-coordinates-point\"},[_c('i',{staticClass:\"icon-clickable\",class:_vm.icon,attrs:{\"title\":\"Add Marker\"},on:{\"click\":_vm.onAddMarker}}),_c('div',{staticClass:\"selectable\",staticStyle:{\"margin-left\":\"4px\"},style:({ 'min-width': _vm.isDMS ? '210px' : '100px' }),domProps:{\"innerHTML\":_vm._s(_vm.currentPoint)}}),_c('i',{staticClass:\"icon-clickable mdi mdi-cached\",staticStyle:{\"margin-left\":\"4px\"},attrs:{\"title\":_vm.isDMS\n                ? 'DMS <=> Latitude, Longitude'\n                : 'Latitude, Longitude <=> DMS'},on:{\"click\":_vm.changeDisplayTypePixelValue}})])]),_c('div',{ref:\"scale\",staticClass:\"mapboxgl-ctrl-scale-custom\"})])]},proxy:true}])},'ModuleContainer',_vm.bindModule,false))\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import proj4 from \"proj4\";\n\nexport const CRS = {};\n\nObject.keys(CRS).forEach((name) => {\n  proj4.defs(name, CRS[name]);\n});\n\nexport function deg_to_dms(deg) {\n  var d = Math.floor(deg);\n  var minfloat = (deg - d) * 60;\n  var m = Math.floor(minfloat);\n  var secfloat = (minfloat - m) * 60;\n  var s = Math.round(secfloat);\n  // After rounding, the seconds might become 60. These two\n  // if-tests are not necessary if no rounding is done.\n  if (s == 60) {\n    m++;\n    s = 0;\n  }\n  if (m == 60) {\n    d++;\n    m = 0;\n  }\n  return { deg: d, min: m, sec: s };\n}\nexport function dms_to_des({ deg, min, sec } = {}) {\n  let result = (Number(deg) + Number(min) / 60 + Number(sec) / 3600).toFixed(6);\n  return result;\n}\nexport function deg_to_dms_string(str) {\n  let { deg, min, sec } = deg_to_dms(str);\n\n  return (\n    deg +\n    \"° \" +\n    (min + \"\").padStart(2, \"0\") +\n    \"′ \" +\n    (sec + \"\").padStart(2, \"0\") +\n    \"″\"\n  );\n}\nexport const latDMS = (lat) => {\n  return `${dcToDeg(lat)}° ${dcToMin(lat)}' ${parseFloat(\n    dcToSec(lat).toFixed(3)\n  )}\" ${lat > 0 ? \"N\" : \"S\"}`;\n};\n\nexport const lngDMS = (lng) => {\n  return `${dcToDeg(lng)}° ${dcToMin(lng)}' ${parseFloat(\n    dcToSec(lng).toFixed(3)\n  )}\" ${lng > 0 ? \"E\" : \"W\"}`;\n};\n\nconst dcToDeg = (val) => {\n  if (val === 0) {\n    return 0;\n  }\n  return Math.floor(Math.abs(val));\n};\n\nconst dcToMin = (val) => {\n  if (val === 0) {\n    return 0;\n  }\n  return Math.floor((Math.abs(val) - Math.floor(Math.abs(val))) * 60);\n};\n\nconst dcToSec = (val) => {\n  if (val === 0) {\n    return 0;\n  }\n  return (Math.abs(val) - dcToDeg(val) - dcToMin(val) / 60) * 3600;\n};\n","<template>\n  <ModuleContainer v-bind=\"bindModule\">\n    <template #btn>\n      <div\n        class=\"button-container d-flex mapboxgl-ctrl-mouse-coordinates-container\"\n      >\n        <div class=\"mapboxgl-ctrl-mouse-coordinates\">\n          <div\n            class=\"mapboxgl-ctrl-mouse-coordinates-zoom flex-grow-0 d-flex pr-2\"\n          >\n            <i :class=\"[zoomIcon]\" title=\"Current Zoom\" />\n            <div style=\"margin-left: 4px\">{{ currentZoom }}</div>\n          </div>\n          <div class=\"mapboxgl-ctrl-mouse-coordinates-point\">\n            <i\n              class=\"icon-clickable\"\n              :class=\"icon\"\n              title=\"Add Marker\"\n              @click=\"onAddMarker\"\n            />\n\n            <div\n              style=\"margin-left: 4px\"\n              class=\"selectable\"\n              v-html=\"currentPoint\"\n              :style=\"{ 'min-width': isDMS ? '210px' : '100px' }\"\n            >\n            </div>\n            <i\n              :title=\"\n                isDMS\n                  ? 'DMS <=> Latitude, Longitude'\n                  : 'Latitude, Longitude <=> DMS'\n              \"\n              style=\"margin-left: 4px\"\n              @click=\"changeDisplayTypePixelValue\"\n              class=\"icon-clickable mdi mdi-cached\"\n            />\n          </div>\n        </div>\n\n        <div ref=\"scale\" class=\"mapboxgl-ctrl-scale-custom\"> </div>\n      </div>\n    </template>\n  </ModuleContainer>\n</template>\n\n<script>\nimport mapboxgl from \"mapbox-gl\";\nimport ModuleMixin from \"@/components/Map/mixins/ModuleMixin\";\n\nimport { deg_to_dms_string, latDMS, lngDMS } from \"@utils/CRS\";\nimport { debounce } from \"@utils\";\n\nconst defaultOptions = {\n  unit: \"metric\"\n};\nexport default {\n  mixins: [ModuleMixin],\n\n  props: {\n    icon: {\n      type: String,\n      default: \"mdi mdi-map-marker-outline\"\n    },\n\n    zoomIcon: {\n      type: String,\n      default: \"mdi mdi-magnify\"\n    }\n  },\n\n  data() {\n    return {\n      lngLat: { latitude: 0, longitude: 0 },\n      currentZoom: 0,\n      currentPoint: undefined,\n      isDMS: true\n    };\n  },\n\n  methods: {\n    changeDisplayTypePixelValue() {\n      this.isDMS = !this.isDMS;\n      this.changePixelValue();\n    },\n    changePixelValue() {\n      if (this.isDMS)\n        this.currentPoint =\n          latDMS(+this.lngLat.latitude.toFixed(4)) +\n          \", &nbsp;\" +\n          lngDMS(+this.lngLat.longitude.toFixed(4));\n      else\n        this.currentPoint =\n          this.lngLat.latitude.toFixed(4) +\n          \",&nbsp;&nbsp;\" +\n          this.lngLat.longitude.toFixed(4);\n    },\n\n    onInit() {\n      this.bindedOnMouseMove = this.onMouseMove.bind(this);\n      this.bindedOnZoomEnd = this.onZoomEnd.bind(this);\n      this.bindedOnMapMove = this.onMapMove.bind(this);\n\n      this.map.on(\"move\", this.bindedOnMapMove);\n      this.map.on(\"mousemove\", this.bindedOnMouseMove);\n      this.map.on(\"zoomend\", this.bindedOnZoomEnd);\n\n      this.options = Object.assign({}, defaultOptions);\n      this.currentZoom = this.map.getZoom().toFixed(2);\n\n      let center = this.map.getCenter();\n      this.lngLat.latitude = center.lat;\n      this.lngLat.longitude = center.lng;\n      this.changePixelValue();\n      this.$nextTick(() => {\n        updateScale(this.map, this.$refs.scale, this.options);\n      });\n    },\n    onDestroy() {\n      this.map.off(\"zoomend\", this.bindedOnZoomEnd);\n      this.map.off(\"mousemove\", this.bindedOnMouseMove);\n      this.map.off(\"move\", this.bindedOnMapMove);\n    },\n    onMapMove() {\n      updateScale(this.map, this.$refs.scale, this.options);\n    },\n    onMouseMove: debounce(function (e) {\n      // this.lngLat.latitude = e.lngLat.lat.toFixed(4)\n      // this.lngLat.longitude = e.lngLat.lng.toFixed(4)\n      let point = [e.lngLat.lng, e.lngLat.lat];\n      this.lngLat.latitude = point[1];\n      this.lngLat.longitude = point[0];\n      this.changePixelValue();\n    }, 15),\n\n    onZoomEnd() {\n      this.currentZoom = this.map.getZoom().toFixed(2);\n    },\n\n    addMarker(lngLat) {\n      const text = window.document.createElement(\"div\");\n      text.className = \"selectable\";\n      text.innerText = `${deg_to_dms_string(\n        lngLat.lng.toFixed(8)\n      )}, ${deg_to_dms_string(lngLat.lat.toFixed(8))}`;\n\n      const removeMarkerButton = window.document.createElement(\"i\");\n      removeMarkerButton.className = \"mdi mdi-delete\";\n      removeMarkerButton.title = \"Remove Marker\";\n      removeMarkerButton.style.marginLeft = \"4px\";\n      removeMarkerButton.style.cursor = \"pointer\";\n      removeMarkerButton.style.fontSize = \"14px\";\n      removeMarkerButton.style.width = \"14px\";\n      removeMarkerButton.style.height = \"14px\";\n      removeMarkerButton.style.lineHeight = \"14px\";\n      removeMarkerButton.addEventListener(\"click\", () => {\n        this.removeMarker();\n      });\n\n      const container = window.document.createElement(\"div\");\n      container.style.display = \"flex\";\n      container.style.alignItems = \"center\";\n\n      container.append(text, removeMarkerButton);\n\n      const popup = new mapboxgl.Popup({\n        closeButton: false\n      }).setDOMContent(container);\n\n      this.marker = new mapboxgl.Marker()\n        .setLngLat(lngLat)\n        .setPopup(popup)\n        .addTo(this.map);\n\n      this.marker.getElement().style.cursor = \"pointer\";\n\n      this.marker.togglePopup();\n    },\n\n    removeMarker() {\n      if (!this.marker) return;\n\n      this.marker.remove();\n    },\n\n    onMapClick(e) {\n      this.addMarker(e.lngLat);\n      this.changeCursor(\"\");\n    },\n\n    changeCursor(cursor) {\n      this.map.getCanvas().style.cursor = cursor;\n    },\n    onAddMarker() {\n      this.removeMarker();\n\n      this.changeCursor(\"crosshair\");\n\n      this.map.once(\"click\", this.onMapClick.bind(this));\n    }\n  }\n};\n\nfunction updateScale(map, container, options) {\n  // A horizontal scale is imagined to be present at center of the map\n  // container with maximum length (Default) as 100px.\n  // Using spherical law of cosines approximation, the real distance is\n  // found between the two coordinates.\n  const maxWidth = (options && options.maxWidth) || 100;\n\n  const y = map._container.clientHeight / 2;\n  const left = map.unproject([0, y]);\n  const right = map.unproject([maxWidth, y]);\n  const maxMeters = left.distanceTo(right);\n  // The real distance corresponding to 100px scale length is rounded off to\n  // near pretty number and the scale length for the same is found out.\n  // Default unit of the scale is based on User's locale.\n  if (options && options.unit === \"imperial\") {\n    const maxFeet = 3.2808 * maxMeters;\n    if (maxFeet > 5280) {\n      const maxMiles = maxFeet / 5280;\n      setScale(container, maxMiles, map._getUIString(\"ScaleControl.Miles\"));\n    } else {\n      setScale(container, maxFeet, map._getUIString(\"ScaleControl.Feet\"));\n    }\n  } else if (options && options.unit === \"nautical\") {\n    const maxNauticals = maxMeters / 1852;\n    setScale(\n      container,\n      maxNauticals,\n      map._getUIString(\"ScaleControl.NauticalMiles\")\n    );\n  } else if (maxMeters >= 1000) {\n    setScale(\n      container,\n      maxMeters / 1000,\n      map._getUIString(\"ScaleControl.Kilometers\")\n    );\n  } else {\n    setScale(container, maxMeters, map._getUIString(\"ScaleControl.Meters\"));\n  }\n}\n\nfunction setScale(container, maxDistance, unit) {\n  const distance = getRoundNum(maxDistance);\n  if (container) container.innerHTML = `${distance}&nbsp;${unit}`;\n}\n\nfunction getDecimalRoundNum(d) {\n  const multiplier = Math.pow(10, Math.ceil(-Math.log(d) / Math.LN10));\n  return Math.round(d * multiplier) / multiplier;\n}\n\nfunction getRoundNum(num) {\n  const pow10 = Math.pow(10, `${Math.floor(num)}`.length - 1);\n  let d = num / pow10;\n\n  d =\n    d >= 10\n      ? 10\n      : d >= 5\n      ? 5\n      : d >= 3\n      ? 3\n      : d >= 2\n      ? 2\n      : d >= 1\n      ? 1\n      : getDecimalRoundNum(d);\n\n  return pow10 * d;\n}\n</script>\n\n<style scoped>\n.mapboxgl-ctrl-scale-custom {\n  background-color: hsla(0, 0%, 100%, 0.7529411764705882);\n  border-radius: 4px;\n  min-width: 100px;\n  font-size: 14px;\n  color: #333;\n  padding: 4px;\n}\n.mapboxgl-ctrl-mouse-coordinates {\n  background-color: hsla(0, 0%, 100%, 0.7529411764705882);\n  border-radius: 4px;\n  min-width: 160px;\n  font-size: 14px;\n  color: #333;\n  padding: 4px;\n}\n.mapboxgl-ctrl-mouse-coordinates > div:not(:last-child) {\n  border-right: 1px solid #7c7c7c;\n  padding-right: 4px;\n}\n.mapboxgl-ctrl-mouse-coordinates > div:not(:first-child) {\n  padding-left: 4px;\n}\n.icon-clickable {\n  cursor: pointer;\n}\n\n.icon-clickable:hover,\n.icon-clickable:focus {\n  filter: brightness(1.1);\n}\n\n.icon-clickable:active {\n  filter: brightness(0.8);\n}\n</style>\n","import mod from \"-!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-124.use[1]!../../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./MouseCoordinatesControl.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-124.use[1]!../../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./MouseCoordinatesControl.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MouseCoordinatesControl.vue?vue&type=template&id=ff59bd4a&scoped=true&\"\nimport script from \"./MouseCoordinatesControl.vue?vue&type=script&lang=js&\"\nexport * from \"./MouseCoordinatesControl.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MouseCoordinatesControl.vue?vue&type=style&index=0&id=ff59bd4a&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ff59bd4a\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"module__container\"},[(_vm.controlVisible && _vm.$slots['btn'])?_c('portal',{attrs:{\"order\":_vm.order,\"to\":_vm.btnTo}},[_c('div',[_vm._t(\"btn\")],2)]):_vm._e(),_vm._t(\"default\"),_c('portal',{attrs:{\"to\":_vm.draggableTo}},[_vm._t(\"draggable\",null,null,_vm.bindDrag)],2)],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"module__container\">\n    <portal v-if=\"controlVisible && $slots['btn']\" :order=\"order\" :to=\"btnTo\">\n      <div>\n        <slot name=\"btn\" />\n      </div>\n    </portal>\n    <slot />\n    <portal :to=\"draggableTo\">\n      <slot v-bind=\"bindDrag\" name=\"draggable\" />\n    </portal>\n  </div>\n</template>\n\n<script>\nimport { Portal } from \"portal-vue\";\nexport default {\n  components: { Portal },\n  props: {\n    prefix: { type: String, default: \"mapbox\" },\n    btnWidth: { type: Number, default: 32 },\n    position: {\n      type: String,\n      default: \"bottom-right\",\n      validator(value) {\n        return (\n          [\"top-left\", \"top-right\", \"bottom-left\", \"bottom-right\"].indexOf(\n            value\n          ) !== -1\n        );\n      }\n    },\n\n    controlVisible: {\n      type: Boolean,\n      default: true\n    },\n    order: {\n      type: Number,\n      default: 0\n    }\n  },\n  computed: {\n    btnTo() {\n      return `${this.position}-${this.prefix}`;\n    },\n    draggableTo() {\n      return `map-draggable-${this.prefix}`;\n    },\n    bindDrag() {\n      let bind = {};\n      if (this.position.includes(\"left\")) {\n        bind.left = 18 + this.btnWidth;\n      }\n      if (this.position.includes(\"right\")) {\n        bind.right = 18 + this.btnWidth;\n      }\n      if (this.position.includes(\"top\")) {\n        bind.top = 10;\n      }\n      if (this.position.includes(\"bottom\")) {\n        bind.bottom = 10;\n      }\n      return bind;\n    }\n  }\n};\n</script>\n\n<style scoped>\n.module__container {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n  z-index: 800;\n}\n\n.module__container > *:not(.module__container) {\n  pointer-events: all;\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-124.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ModuleContainer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-124.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ModuleContainer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ModuleContainer.vue?vue&type=template&id=beabf37e&scoped=true&\"\nimport script from \"./ModuleContainer.vue?vue&type=script&lang=js&\"\nexport * from \"./ModuleContainer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ModuleContainer.vue?vue&type=style&index=0&id=beabf37e&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"beabf37e\",\n  null\n  \n)\n\nexport default component.exports","import { addListenerMap, removeListenerMap } from \"../store/store-event\";\n\nimport ModuleContainer from \"../ModuleContainer.vue\";\n\nexport default {\n  components: { ModuleContainer },\n  props: {\n    position: {\n      type: String,\n      default: \"bottom-right\",\n      validator(value) {\n        return (\n          [\"top-left\", \"top-right\", \"bottom-left\", \"bottom-right\"].indexOf(\n            value\n          ) !== -1\n        );\n      }\n    },\n\n    controlVisible: {\n      type: Boolean,\n      default: true\n    },\n    order: {\n      type: Number,\n      default: 0\n    }\n  },\n\n  data() {\n    return {\n      loaded: false\n    };\n  },\n\n  watch: {},\n\n  inject: [\"getMap\", \"mapId\", \"trans\"],\n  computed: {\n    isLeft() {\n      return this.position.includes(\"left\");\n    },\n    isRight() {\n      return this.position.includes(\"right\");\n    },\n    isTop() {\n      return this.position.includes(\"top\");\n    },\n    isBottom() {\n      return this.position.includes(\"bottom\");\n    },\n    bindModule() {\n      return {\n        controlVisible: this.controlVisible,\n        order: this.order,\n        position: this.position,\n        prefix: this.mapId\n      };\n    }\n  },\n\n  mounted() {\n    this.$once(\"module-loaded\", () => {\n      this.loaded = true;\n    });\n\n    this.$on(\"module-failed\", () => {\n      this.loaded = false;\n    });\n\n    this.getMap(async (map) => {\n      this.map = map;\n      // Revoke event\n      if (this.onInit instanceof Function) {\n        const command = this.onInit();\n\n        if (command instanceof Promise) {\n          try {\n            await command;\n          } catch (error) {\n            this.$emit(\"module-failed\");\n            throw error;\n          }\n        }\n      }\n\n      this.$emit(\"module-loaded\");\n    });\n  },\n\n  destroyed() {\n    if (this.onDestroy instanceof Function) {\n      try {\n        this.onDestroy();\n      } catch (e) {\n        console.error(e);\n      }\n    }\n    this.map = null;\n  },\n\n  methods: {\n    removeListenerMap(event, eventId) {\n      removeListenerMap(this.mapId, event, eventId);\n    },\n    addListenerMap(event, eventId, cb) {\n      addListenerMap(this.mapId, event, eventId, cb);\n    },\n    actionAfterMapLoaded(cb) {\n      if (!this.map) {\n        return this.$once(\"module-loaded\", () => {\n          cb();\n        });\n      }\n      cb();\n    },\n    removeSource(sourceId) {\n      if (this.map.getSource(sourceId)) {\n        this.map.removeSource(sourceId);\n      }\n    },\n    addLayer(layer, beforeId) {\n      if (!this.map) {\n        return this.$once(\"module-loaded\", () => {\n          this.addLayer(layer, beforeId);\n        });\n      }\n\n      this.map.addLayer(layer, beforeId);\n    },\n    removeLayer(layerId) {\n      if (!this.map) return;\n\n      if (this.map.getLayer(layerId)) {\n        this.map.removeLayer(layerId);\n      }\n\n      if (this.map.getSource(layerId)) {\n        this.map.removeSource(layerId);\n      }\n    }\n  }\n};\n"],"names":["render","_vm","this","_c","_self","_b","scopedSlots","_u","key","fn","staticClass","class","zoomIcon","attrs","staticStyle","_v","_s","currentZoom","icon","on","onAddMarker","style","isDMS","domProps","currentPoint","changeDisplayTypePixelValue","ref","proxy","bindModule","staticRenderFns","CRS","deg_to_dms","deg","d","Math","floor","minfloat","m","secfloat","s","round","min","sec","deg_to_dms_string","str","padStart","Object","keys","forEach","name","proj4","latDMS","lat","dcToDeg","dcToMin","parseFloat","dcToSec","toFixed","lngDMS","lng","val","abs","defaultOptions","unit","mixins","props","type","default","data","lngLat","latitude","longitude","methods","changePixelValue","onInit","updateScale","onDestroy","onMapMove","onMouseMove","onZoomEnd","addMarker","text","removeMarkerButton","container","closeButton","setDOMContent","setLngLat","setPopup","popup","addTo","removeMarker","onMapClick","changeCursor","map","options","setScale","maxNauticals","maxMeters","maxDistance","getDecimalRoundNum","getRoundNum","num","component","controlVisible","$slots","order","btnTo","_t","_e","draggableTo","bindDrag","components","Portal","prefix","btnWidth","position","validator","value","computed","bind","ModuleContainer","String","indexOf","Boolean","Number","loaded","watch","inject","isLeft","includes","isRight","isTop","isBottom","mapId","mounted","$once","$on","getMap","async","Function","command","Promise","error","$emit","destroyed","e","console","removeListenerMap","event","eventId","addListenerMap","cb","actionAfterMapLoaded","removeSource","sourceId","getSource","addLayer","layer","beforeId","removeLayer","layerId","getLayer"],"sourceRoot":""}