"use strict";(("undefined"!==typeof self?self:this)["webpackChunkmap"]=("undefined"!==typeof self?self:this)["webpackChunkmap"]||[]).push([[279],{5279:function(t,e,i){i.r(e),i.d(e,{default:function(){return _}});var o=function(){var t=this,e=t._self._c;return e("ModuleContainer",t._b({scopedSlots:t._u([{key:"btn",fn:function(){return[e("div",{staticClass:"button-container d-flex mapboxgl-ctrl-mouse-coordinates-container"},[e("div",{staticClass:"mapboxgl-ctrl-mouse-coordinates"},[e("div",{staticClass:"mapboxgl-ctrl-mouse-coordinates-zoom flex-grow-0 d-flex pr-2"},[e("i",{class:[t.zoomIcon],attrs:{title:"Current Zoom"}}),e("div",{staticStyle:{"margin-left":"4px"}},[t._v(t._s(t.currentZoom))])]),e("div",{staticClass:"mapboxgl-ctrl-mouse-coordinates-point"},[e("i",{staticClass:"icon-clickable",class:t.icon,attrs:{title:"Add Marker"},on:{click:t.onAddMarker}}),e("div",{staticClass:"selectable",staticStyle:{"margin-left":"4px"},style:{"min-width":t.isDMS?"210px":"100px"},domProps:{innerHTML:t._s(t.currentPoint)}}),e("i",{staticClass:"icon-clickable mdi mdi-cached",staticStyle:{"margin-left":"4px"},attrs:{title:t.isDMS?"DMS <=> Latitude, Longitude":"Latitude, Longitude <=> DMS"},on:{click:t.changeDisplayTypePixelValue}})])]),e("div",{ref:"scale",staticClass:"mapboxgl-ctrl-scale-custom"})])]},proxy:!0}])},"ModuleContainer",t.bindModule,!1))},n=[],s=i(7205),a=i.n(s),r=i(7349),l=i(289);const d={};function c(t){var e=Math.floor(t),i=60*(t-e),o=Math.floor(i),n=60*(i-o),s=Math.round(n);return 60==s&&(o++,s=0),60==o&&(e++,o=0),{deg:e,min:o,sec:s}}function h(t){let{deg:e,min:i,sec:o}=c(t);return e+"° "+(i+"").padStart(2,"0")+"′ "+(o+"").padStart(2,"0")+"″"}Object.keys(d).forEach((t=>{l.Z.defs(t,d[t])}));const u=t=>`${m(t)}° ${g(t)}' ${parseFloat(f(t).toFixed(3))}" ${t>0?"N":"S"}`,p=t=>`${m(t)}° ${g(t)}' ${parseFloat(f(t).toFixed(3))}" ${t>0?"E":"W"}`,m=t=>0===t?0:Math.floor(Math.abs(t)),g=t=>0===t?0:Math.floor(60*(Math.abs(t)-Math.floor(Math.abs(t)))),f=t=>0===t?0:3600*(Math.abs(t)-m(t)-g(t)/60);var b=i(7444);const M={unit:"metric"};var v={mixins:[r.Z],props:{icon:{type:String,default:"mdi mdi-map-marker-outline"},zoomIcon:{type:String,default:"mdi mdi-magnify"}},data(){return{lngLat:{latitude:0,longitude:0},currentZoom:0,currentPoint:void 0,isDMS:!0}},methods:{changeDisplayTypePixelValue(){this.isDMS=!this.isDMS,this.changePixelValue()},changePixelValue(){this.isDMS?this.currentPoint=u(+this.lngLat.latitude.toFixed(4))+", &nbsp;"+p(+this.lngLat.longitude.toFixed(4)):this.currentPoint=this.lngLat.latitude.toFixed(4)+",&nbsp;&nbsp;"+this.lngLat.longitude.toFixed(4)},onInit(){this.bindedOnMouseMove=this.onMouseMove.bind(this),this.bindedOnZoomEnd=this.onZoomEnd.bind(this),this.bindedOnMapMove=this.onMapMove.bind(this),this.map.on("move",this.bindedOnMapMove),this.map.on("mousemove",this.bindedOnMouseMove),this.map.on("zoomend",this.bindedOnZoomEnd),this.options=Object.assign({},M),this.currentZoom=this.map.getZoom().toFixed(2);let t=this.map.getCenter();this.lngLat.latitude=t.lat,this.lngLat.longitude=t.lng,this.changePixelValue(),this.$nextTick((()=>{x(this.map,this.$refs.scale,this.options)}))},onDestroy(){this.map.off("zoomend",this.bindedOnZoomEnd),this.map.off("mousemove",this.bindedOnMouseMove),this.map.off("move",this.bindedOnMapMove)},onMapMove(){x(this.map,this.$refs.scale,this.options)},onMouseMove:(0,b.Ds)((function(t){let e=[t.lngLat.lng,t.lngLat.lat];this.lngLat.latitude=e[1],this.lngLat.longitude=e[0],this.changePixelValue()}),15),onZoomEnd(){this.currentZoom=this.map.getZoom().toFixed(2)},addMarker(t){const e=window.document.createElement("div");e.className="selectable",e.innerText=`${h(t.lng.toFixed(8))}, ${h(t.lat.toFixed(8))}`;const i=window.document.createElement("i");i.className="mdi mdi-delete",i.title="Remove Marker",i.style.marginLeft="4px",i.style.cursor="pointer",i.style.fontSize="14px",i.style.width="14px",i.style.height="14px",i.style.lineHeight="14px",i.addEventListener("click",(()=>{this.removeMarker()}));const o=window.document.createElement("div");o.style.display="flex",o.style.alignItems="center",o.append(e,i);const n=new(a().Popup)({closeButton:!1}).setDOMContent(o);this.marker=(new(a().Marker)).setLngLat(t).setPopup(n).addTo(this.map),this.marker.getElement().style.cursor="pointer",this.marker.togglePopup()},removeMarker(){this.marker&&this.marker.remove()},onMapClick(t){this.addMarker(t.lngLat),this.changeCursor("")},changeCursor(t){this.map.getCanvas().style.cursor=t},onAddMarker(){this.removeMarker(),this.changeCursor("crosshair"),this.map.once("click",this.onMapClick.bind(this))}}};function x(t,e,i){const o=i&&i.maxWidth||100,n=t._container.clientHeight/2,s=t.unproject([0,n]),a=t.unproject([o,n]),r=s.distanceTo(a);if(i&&"imperial"===i.unit){const i=3.2808*r;if(i>5280){const o=i/5280;y(e,o,t._getUIString("ScaleControl.Miles"))}else y(e,i,t._getUIString("ScaleControl.Feet"))}else if(i&&"nautical"===i.unit){const i=r/1852;y(e,i,t._getUIString("ScaleControl.NauticalMiles"))}else r>=1e3?y(e,r/1e3,t._getUIString("ScaleControl.Kilometers")):y(e,r,t._getUIString("ScaleControl.Meters"))}function y(t,e,i){const o=L(e);t&&(t.innerHTML=`${o}&nbsp;${i}`)}function S(t){const e=Math.pow(10,Math.ceil(-Math.log(t)/Math.LN10));return Math.round(t*e)/e}function L(t){const e=Math.pow(10,`${Math.floor(t)}`.length-1);let i=t/e;return i=i>=10?10:i>=5?5:i>=3?3:i>=2?2:i>=1?1:S(i),e*i}var k=v,C=i(1001),$=(0,C.Z)(k,o,n,!1,null,"ff59bd4a",null),_=$.exports},7349:function(t,e,i){i.d(e,{Z:function(){return u}});i(6699);var o=i(5947),n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"module__container"},[t.controlVisible&&t.$slots["btn"]?e("portal",{attrs:{order:t.order,to:t.btnTo}},[e("div",[t._t("btn")],2)]):t._e(),t._t("default"),e("portal",{attrs:{to:t.draggableTo}},[t._t("draggable",null,null,t.bindDrag)],2)],2)},s=[],a=i(6128),r={components:{Portal:a.h_},props:{prefix:{type:String,default:"mapbox"},btnWidth:{type:Number,default:32},position:{type:String,default:"bottom-right",validator(t){return-1!==["top-left","top-right","bottom-left","bottom-right"].indexOf(t)}},controlVisible:{type:Boolean,default:!0},order:{type:Number,default:0}},computed:{btnTo(){return`${this.position}-${this.prefix}`},draggableTo(){return`map-draggable-${this.prefix}`},bindDrag(){let t={};return this.position.includes("left")&&(t.left=18+this.btnWidth),this.position.includes("right")&&(t.right=18+this.btnWidth),this.position.includes("top")&&(t.top=10),this.position.includes("bottom")&&(t.bottom=10),t}}},l=r,d=i(1001),c=(0,d.Z)(l,n,s,!1,null,"beabf37e",null),h=c.exports,u={components:{ModuleContainer:h},props:{position:{type:String,default:"bottom-right",validator(t){return-1!==["top-left","top-right","bottom-left","bottom-right"].indexOf(t)}},controlVisible:{type:Boolean,default:!0},order:{type:Number,default:0}},data(){return{loaded:!1}},watch:{},inject:["getMap","mapId","trans"],computed:{isLeft(){return this.position.includes("left")},isRight(){return this.position.includes("right")},isTop(){return this.position.includes("top")},isBottom(){return this.position.includes("bottom")},bindModule(){return{controlVisible:this.controlVisible,order:this.order,position:this.position,prefix:this.mapId}}},mounted(){this.$once("module-loaded",(()=>{this.loaded=!0})),this.$on("module-failed",(()=>{this.loaded=!1})),this.getMap((async t=>{if(this.map=t,this.onInit instanceof Function){const t=this.onInit();if(t instanceof Promise)try{await t}catch(e){throw this.$emit("module-failed"),e}}this.$emit("module-loaded")}))},destroyed(){if(this.onDestroy instanceof Function)try{this.onDestroy()}catch(t){console.error(t)}this.map=null},methods:{removeListenerMap(t,e){(0,o.sq)(this.mapId,t,e)},addListenerMap(t,e,i){(0,o.bb)(this.mapId,t,e,i)},actionAfterMapLoaded(t){if(!this.map)return this.$once("module-loaded",(()=>{t()}));t()},removeSource(t){this.map.getSource(t)&&this.map.removeSource(t)},addLayer(t,e){if(!this.map)return this.$once("module-loaded",(()=>{this.addLayer(t,e)}));this.map.addLayer(t,e)},removeLayer(t){this.map&&(this.map.getLayer(t)&&this.map.removeLayer(t),this.map.getSource(t)&&this.map.removeSource(t))}}}}}]);
//# sourceMappingURL=map.umd.min.279.js.map